<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<record id="hr_contract_view_form_psi" model="ir.ui.view">
		<field name="name">hr.contract.form.psi</field>
		<field name="model">hr.contract</field>
		<field name="inherit_id" ref="hr_contract.hr_contract_view_form" />
		<field name="arch" type="xml">	
			<!-- <xpath expr="//field[@name='job_id']" position="after">
				<field name="psi_contract_type" />
			</xpath> -->	
      		<xpath expr="//field[@name='type_id']" position='replace'>
				<field name="type_id" invisible="1" />
			</xpath>
			
			<field name="working_hours" position="before">
				<field name="work_years"/>
			</field>

			<xpath expr="//field[@name='department_id']" position='after'>
				<field name="psi_contract_type" />
				<field name="place_of_work" />
			</xpath>
			<xpath expr="//notebook" position="inside">				
			</xpath>
			<xpath expr="//group[@name='duration_group']" position="after">
				<group name="result_evaluation" string="Résultat de l'évaluation" > <!-- Condition if date_end_trial terminé -->
					<field name="result_evaluation" />
					<!-- <field name="scan_version_file" attrs="{'invisible': [('result_evaluation','=',False)]}"/> -->
					<button string="" class="hidden" /> 
					<button name="action_result_evaluation_send" 
						string="Envoyer le resultat par mail" 
						type="object" 
						class="btn-primary right"
						attrs="{'invisible': [('result_evaluation','=',False)]}"
						/>
				</group>
			</xpath>
			<group name="duration_group" position="after">
				<group name="rupture" string="Rupture de contrat">
					<field name="date_rupture" />
					<field name="motif_rupture" />
					<button name="set_employee_inactif" 
  								type="object" 
								string="Mettre inactif l'employé correspondant"
  								class="oe_highlight"
  								attrs="{'invisible': ['|', ('motif_rupture','=',False),('state','=','close')]}"
  								onClick="$(this).prop('disabled', true);"
  								/>
				</group>
			</group>
			
			<!-- Contract close - READONLY -->			
			<field name='name' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='employee_id' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='job_id' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='department_id' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='psi_contract_type' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='place_of_work' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='wage' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='trial_date_start' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='trial_date_end' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='date_start' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>	
			<field name='date_end' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='working_hours' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='result_evaluation' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='date_rupture' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>		
			<field name='motif_rupture' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>	
			<field name='visa_no' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>	
			<field name='visa_expire' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>	
			<field name='permit_no' position="attributes">
	            <attribute name="attrs">{'readonly':[('state','=','close')]}</attribute>
	        </field>	
		</field>
	</record>

	<!-- Resume and Letters -->
	<record id="hr_contract.ir_attachment_view_search_inherit_hr_employee"
		model="ir.ui.view">
		<field name="name">ir.attachment.search.inherit.contract</field>
		<field name="model">ir.attachment</field>
		<field name="mode">primary</field>
		<field name="inherit_id" ref="base.view_attachment_search" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='create_date']" position="after">
				<field name="index_content" string="Content" />
			</xpath>
			<xpath expr="//filter[@name='my_documents_filter']" position="attributes">
				<attribute name='invisible'>1</attribute>
			</xpath>
			<xpath expr="//filter[@name='url_filter']" position="attributes">
				<attribute name='invisible'>1</attribute>
			</xpath>
			<xpath expr="//filter[@name='binary_filter']" position="attributes">
				<attribute name='invisible'>1</attribute>
			</xpath>
		</field>
	</record>

	<!-- TODO: What is this ??? -->
	<record model="ir.actions.act_window" id="hr_contract_resumes">
		<field name="name">Resumes and Letters</field>
		<field name="res_model">ir.attachment</field>
		<field name="view_type">form</field>
		<field name="view_mode">kanban,tree,form</field>
		<field name="view_id" ref="mail.view_document_file_kanban" />
		<field name="search_view_id"
			ref="hr_contract.ir_attachment_view_search_inherit_hr_employee" />
		<field name="domain">[('res_model','=','hr.employee')]</field>
		<field name="context">{'create': False}</field>
		<field name="help" type="html">
			<p>
				No document yet.
			</p>
			<p>
				This menu helps you search through resumes and motivation
				letters.
				Odoo automatically indexes .PDF, .DOC, DOCX, .TXT
				files so that you
				can search keywords from the content of these
				files.
			</p>
		</field>
	</record>

	<record id="hr_contract_wage_grid_form" model="ir.ui.view">
		<field name="name">hr.wage.grid.form</field>
		<field name="model">hr.wage.grid</field>
		<field name="arch" type="xml">
			<form string="form grille salariale">

				<field name="wage_grid_details">
					<tree string="Wage Grid Details" editable="bottom">
						<field name="professional_category" />
						<field name="job_id" />
						<field name="category" />
						<field name="sub_category" />
						<field name="echelon_1" />
						<field name="echelon_2" />
						<field name="echelon_3" />
						<field name="echelon_4" />
						<field name="echelon_5" />
						<field name="echelon_6" />
						<field name="echelon_7" />
						<field name="echelon_8" />
						<field name="echelon_9" />
						<field name="echelon_10" />
						<field name="echelon_11" />
						<field name="echelon_12" />
						<field name="echelon_13" />
						<field name="echelon_14" />
						<field name="echelon_15" />
						<field name="echelon_16" />
						<field name="echelon_17" />
						<field name="echelon_18" />
						<field name="echelon_19" />
						<field name="echelon_20" />
						<field name="echelon_hc" />
					</tree>
				</field>
			</form>
		</field>
	</record>

	<record id="open_contract_wage_grid" model="ir.actions.act_window">
		<field name="name">Grille salariale</field>
		<field name="res_model">hr.wage.grid</field>
		<field name="view_type">form</field>
		<field name="view_mode">form</field>
		<field name="view_id" ref="hr_contract_wage_grid_form" />
	</record>

	<menuitem id="menu_contract_wage_grid" action="open_contract_wage_grid"
		parent="hr.menu_hr_root" sequence="5" />

</odoo>
