<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<record id="view_hr_job_form3" model="ir.ui.view">
		<field name="name">hr.job.form2</field>
		<field name="model">hr.job</field>
		<field name="inherit_id" ref="hr_recruitment.hr_job_survey" />
		<field name="arch" type="xml">
			<field name="address_id" position="after">
				<field name="place_of_employment" />
				<field name="application_deadline_date" attrs="{'required': [('state', 'in', ('open'))]}"/>
				<field name="psi_motif" attrs="{'required': [('state', 'in', ('open'))]}"/>
				<field name="nature_recrutement" attrs="{'invisible': [('recrutement_type','!=','consultant')], 'required': [('recrutement_type', '=', 'consultant')]}" />
				<field name="psi_budget_code_distribution" options="{'no_quick_create': True, 'no_create_edit' : True}" attrs="{'required': [('state', '=', 'validation_finance')]}"/>
				<field name="subordination_link_id" />
				<field name="psi_contract_type" attrs="{'required': [('state', 'in', ('open'))]}" />
				<field name="psi_contract_duration" attrs="{'invisible': ['|',('psi_contract_type','=','cdi'),('psi_contract_type','=','prestataire')], 'required': [('psi_contract_type', '=', 'cdd')]}" />
			</field>
		</field>
	</record>
	<record id="view_hr_job_form2" model="ir.ui.view">
		<field name="name">hr.job.form</field>
		<field name="model">hr.job</field>
		<field name="inherit_id" ref="hr.view_hr_job_form" />
		<field name="arch" type="xml">
			<field name="department_id" position="after">
				<field name="recrutement_type_id" />
				<field name="recrutement_type" invisible="1" />
				
				<field name="level_of_education_id" />
				<field name="experience_required_ids" colspan="2">
					<tree string="Experience requise" editable="bottom">
						<field name="name" />
						<field name="month" />
						<field name="year" />
					</tree>
				</field>
				
				<field name="poste_description" />
			</field>
			<button name="set_recruit" position="replace">
				<button name="set_recruit" invisible="1" />
			</button>
			<field name="message_follower_ids" position="after">
				<field name="message_ids" widget="mail_thread"/>
			</field>

			<xpath expr="//field[@name='state']" position="replace">
				<!-- etats pour recrutement autres que stagiaires ??? -->
				<field name="state" widget="statusbar"
					statusbar_visible="open,tdr_redaction,validation_finance,analyse,rr_validation,refused,recruit" />

				<!-- etats pour recrutement de stagiaires ??? -->
			</xpath>

			<!-- boutons -->
	
			<xpath expr="//button[@name='set_open']" position="after">
				<button name="button_refuser" states="analyse,rr_validation"
					string="Refuser" attrs="{'invisible': [('state','!=','analyse')]}" />
			</xpath>
			<xpath expr="//button[@name='set_open']" position="after">
				<button name="button_rr_validation" string="Analyse Faite"
					class="oe_highlight"
					attrs="{'invisible': [('state','!=','analyse')]}" />
			</xpath>
			<xpath expr="//button[@name='set_open']" position="after">
				<button name="button_tdr_redaction" 
					string="Rédaction TDR" class="oe_highlight" attrs="{'invisible': ['|',('nature_recrutement','=','interne'), ('state', '!=', 'open')]}"/>
			</xpath>
			
			<xpath expr="//button[@name='set_open']" position="after">
				<button name="button_interne" 
					string="Appel au candidatures" class="oe_highlight" attrs="{'invisible': ['|',('nature_recrutement','!=','interne'), ('state', '!=', 'open')]}"/>
			</xpath>
			<xpath expr="//button[@name='set_open']" position="after">
				<button name="button_accepter_consideration_dossier"  string="Accepter"  attrs="{'invisible': ['|',('state','!=','tdr_redaction'),('nature_recrutement','!=','conssideration_dossier')]}"
					class="oe_highlight" />
			</xpath>
			<xpath expr="//button[@name='set_open']" position="after">
				<button name="button_accepter"  string="Approuver"  state="analyse" attrs="{'invisible': [('state','!=','rr_validation')]}"
					class="oe_highlight" />
			</xpath>
			<xpath expr="//button[@name='set_open']" position="after">
				<button name="button_analyse" string="Validation faite" attrs="{'invisible': [('state','!=','validation_finance')]}"
					class="oe_highlight" />
			</xpath>
			<xpath expr="//button[@name='set_open']" position="after">
				<button name="button_validation_finance" string="Passer à Validation Finance"
					class="oe_highlight" attrs="{'invisible': ['|',('state','!=','tdr_redaction'),('nature_recrutement','=','conssideration_dossier')]}"  />
			</xpath>

		</field>
	</record>

	<record id="hr_job_simple_form2" model="ir.ui.view">
		<field name="name">hr.job.simple.form1</field>
		<field name="model">hr.job</field>
		<field name="inherit_id" ref="hr_recruitment.hr_job_simple_form" />
		<field name="arch" type="xml">
			<data>
				<field name="name" position="after">
					<field name="recrutement_type_id" />
					<field name="recrutement_type" invisible="1" />
				</field>
			</data>
		</field>
	</record>

</odoo>
