<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<!-- Form declaration - cours d'ethique -->
		<record id="view_action_add_declaration" model="ir.ui.view">
			<field name="name">hr.declaration.interest.form</field>
			<field name="model">hr.declaration.interest</field>
			<field name="arch" type="xml">
				<form string="Declaration d'intérêt">
					<div class="oe_title">
                           <span for="name" class="oe_edit_only"/>
                           <h1>
                               <field name="name" placeholder="Nom du déclaration"/>
                           </h1>
                       </div>
                       <group>
                        <group>
                            <field name="employee_id"/>
                            <field name="b_edit" invisible="1"/>
                        </group>
                        <group>
                            <field name="year"/>
                            <field name="declaration_interet"/> 
                        </group>
                    </group>
                    <footer attrs="{'invisible' : [('b_edit','=',True)]}">
                       <button string='Sauvegarder' name="write" type="object" class="btn-primary"/>
                       <button string="Annuler" class="btn-default" special="cancel"/>
                    </footer>
				</form>
			</field>
		</record>
		
		<!-- cours d'ethique -->
		<!-- record id="view_action_add_cours_ethique" model="ir.ui.view">
			<field name="name">hr.cours.ethique.form</field>
			<field name="model">hr.declaration.interest</field>
			<field name="arch" type="xml">
				<form string="Cours d'étique">
					<div class="oe_title">
                           <span for="name" class="oe_edit_only"/>
                           <h1>
                               <field name="name" placeholder="Nom du déclaration"/>
                           </h1>
                       </div>
                       <group>
                        <group>
                            <field name="employee_id"/>
                            <field name="b_edit" invisible="1"/>
                        </group>
                        <group>
                            <field name="year"/>
                            <field name="declaration_interet"/> 
                        </group>
                    </group>
                    <footer attrs="{'invisible' : [('b_edit','=',True)]}">
                       <button string='Sauvegarder' name="write" type="object" class="btn-primary"/>
                       <button string="Annuler" class="btn-default" special="cancel"/>
                    </footer>
				</form>
			</field>
		</record-->
		
		<!-- Action add declaration - cours ethique -->
		<record id="action_add_declaration" model="ir.actions.act_window">
			<field name="name">Ajouter une déclaration d'intérêt</field>
			<field name="res_model">hr.declaration.interest</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_action_add_declaration" />
			<field name="target">new</field>
			<field name="context">{'default_employee_id': active_id}</field>
		</record>
		
		<record id="hr_hr_employee_view_form_psi" model="ir.ui.view">
			<field name="name">hr.hr.employee.view.form.psi</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_form" />
			<field name="arch" type="xml">
				<xpath expr="//form/sheet/notebook/page[@name='personal_information']" position="replace">
					<page name="personal_information" string="Information personnelle" groups="hr.group_hr_user">
                       	<group col="2">
							<group string="Etat civil">
		                         <field name="matricule"/>
		                         <field name="name" string='Nom et prénom'/>
		                         <field name="birthday" string='Date de naissance'/>
		                         <field name="place_of_birth" string='Lieu de naissance'/>
		                         <field name="father_name" string='Nom du père'/>
		                         <field name="mother_name" string='Nom de la mère'/>
		                         <field name="information_cin_id" string='Information sur CIN'/>
		                         <field name="passport_id" string='Numéro passeport'/>
		                         <field name="conjoint_s_name" string="Nom du conjoint"/>
		                         <field name="spouse_s_name" string="Nom de l'époux (se)"/>
		                         <field name="sexe" string="Sexe"/>
		                         <field name="marital" string="Situation matrimoniale"/>
		                         <field name="children" string="Nombre d'enfant"/>
		                     </group>
		                     <group string="Information de contact">
		                         <field name="matricule" string='Adresse personnel'/>
		                         <field name="personal_phone" string='Téléphone portable personnel'/>
		                         <field name="personal_fixed_phone" string='Téléphone fixe personnel'/>
		                         <field name="emergency_contact_id" string="Personne à contacter d'urgence"/>
		                         <field name="beneficiary_of_death_benefit_id" string="Bénéficiaire d'indemnité en cas de décès"/>
		                     </group>
		                     <group string="Autres informations">
		                         <field name="bank_account_id" string='Numéro compte bancaire'/>
		                         <field name="cnaps_number" string="Numéro CNaPS"/>
		                         <field name="groupe_sanguin" string="Groupe sanguin"/>
		                     </group>
	                     </group>
                     </page>
                     <page string="Pièces à fournir">
						<group col="1">
							<group col="2">
								<field name="state" invisible="1"/>
								<div style="margin:5px">
									<field name="personal_information" nolabel="1"/>
									<span>Fiche de renseignements personnels</span>
								</div>
								<div style="margin:5px">
									<field name="id_photos" nolabel="1"/>
									<span>Photo d'identité</span>
								</div>
								<div style="margin:5px">
									<field name="certificate_residence" nolabel="1"/>
									<span>Certificat de résidence</span>
								</div>
								<div style="margin:5px">
									<field name="marriage_certificate" nolabel="1"/>
									<span>Acte de mariage ou copie de livret de famille</span>
								</div>
								<div style="margin:5px">
									<field name="cin" />
									<span>CIN</span>
								</div>
								<div style="margin:5px">
									<field name="work_certificate" nolabel="1"/>
									<span>Copies certificats de travail</span>
								</div>
								<div style="margin:5px">
									<field name="qualifications" nolabel="1"/>
									<span>Copies diplômes</span>
								</div>
								<div style="margin:5px">
									<field name="criminal_records" nolabel="1"/>
									<span>Casier judiciaires</span>
								</div>
								<div style="margin:5px">
									<field name="card_cnaps" nolabel="1"/>
									<span>Copie carte CNaPS</span>
								</div>
								<div style="margin:5px">
									<field name="birth_certificate_children" nolabel="1"/>
									<span>Acte de naissance des enfants</span>
								</div>
							</group>
							<br/>
							<div>
								<span><b>Déclaration d'interêt</b></span>
								<field name="details_certificate_ethics" string="Déclaration d'interêt">
									<tree delete="false">
										<field name="name"/>
										<field name="date_add" />
										<field name="year" />
										<!-- <field name="checked_current_year" attrs="{'readonly':1}" onchange="checked_condition()"/> -->
									</tree>
								</field>
							</div>
							<div>
								<span><b>Cours d'étique</b></span>
								<field name="details_certificate_ethics" string="Cours d'étique">
									<tree delete="false">
										<field name="name"/>
										<field name="date_add" />
										<field name="year" />
									</tree>
								</field>
							</div>
						</group>						
					</page>
					<page string="Sanctions">
						<group>
							<field name="sanctions_data" nolabel="1">
								<tree string="" editable="bottom">
									<field name="sanction_date" />
									<field name="sanction_type_id" />
									<field name="sanction_objet" />
									<field name="sanction_date_effacement" />
									<field name="sanction_commentaire" />
								</tree>
							</field>
						</group>
					</page>
					<page string="Bridger">
						<group>
							<field name="psi_bridger_insight" nolabel="1">
								<tree string="" editable="bottom">
									<field name="date" />
									<field name="result" />
								</tree>
							</field>
						</group>
					</page>
				</xpath>
				<!-- xpath expr="//sheet" position='before'>
					<header>
						<button name="%(action_add_declaration)d"
								type="action"
								string="Ajouter une déclaration d'intérêt" 
								class="btn-primary"
								/>
					</header>
				</xpath-->
				<div name="button_box" position="inside">
					<button name="action_get_attachment_tree_view" class="oe_stat_button"
						icon="fa-book" type="object">
						<field name="attachment_number" widget="statinfo" string="Documents"
							modifiers="{'readonly': true}" />
					</button>
				</div>

				<!--xpath expr="//field[@name='identification_id']" position='before'>
					<field name="information_cin_id" />
				</xpath-->
				<!--xpath expr="//field[@name='gender']" position='replace'>
					<field name="gender" invisible="1" />
				</xpath-->
				<!--xpath expr="//field[@name='marital']" position='before'>
					<field name="sexe" />
				</xpath-->
				<!--xpath expr="//field[@name='address_home_id']" position='before'>
					<field name="personal_phone" />
					<field name="father_name" />
					<field name="mother_name" />
					<field name="spouse_s_name" />
					<field name="psi_contract_type" invisible="1" />
				</xpath-->
				<!--xpath expr="//field[@name='address_home_id']" position='after'>
					<field name="information_about_children_id" />
					<field name="emergency_contact_id" />
					<field name="beneficiary_of_death_benefit_id" />
				</xpath-->

				<!-- Collaborator close - READONLY -->
				<field name='name' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='category_ids' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='address_id' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>

				<field name='mobile_phone' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='work_location' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='work_email' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='work_phone' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='department_id' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='job_id' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='parent_id' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='notes' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='coach_id' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='calendar_id' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='notes' position="attributes">
					<attribute name="attrs">{'readonly':[('state','=','close')]}
					</attribute>
				</field>
				<field name='job_id' position="after">
					<field name="psi_budget_code_distribution" />
				</field>
				<field name='coach_id' position="replace">
					<field name="coach_id" string="Supérieur Hiérarchique" />
				</field>
			</field>
		</record>

		<record id="hr_contract_type_view_form" model="ir.ui.view">
			<field name="name">hr.contract.type.sanction.form</field>
			<field name="model">hr.contract.type.sanction</field>
			<field name="arch" type="xml">
				<form string="Liste des sanctions">
					<group col="4">
						<field colspan="4" name="name" />
					</group>
				</form>
			</field>
		</record>

		<record id="hr_contract_sanction_view_tree" model="ir.ui.view">
			<field name="name">hr.contract.type.sanction.tree</field>
			<field name="model">hr.contract.type.sanction</field>
			<field name="arch" type="xml">
				<tree string="Liste des sanctions">
					<field colspan="4" name="name" />
				</tree>
			</field>
		</record>

		<!-- ACTIONS -->
		<record id="action_hr_contract_type_sanction" model="ir.actions.act_window">
			<field name="name">Liste des sanctions</field>
			<field name="res_model">hr.contract.type.sanction</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="hr_contract_sanction_view_tree" />
		</record>


		<record id="hr_contract_sanction_view_tree" model="ir.ui.view">
			<field name="name">hr.contract.type.sanction.tree</field>
			<field name="model">hr.contract.type.sanction</field>
			<field name="arch" type="xml">
				<tree string="Liste des sanctions">
					<field colspan="4" name="name" />
				</tree>
			</field>
		</record>

		<!--Search in hr.employee -->
		<record id="hr_employee_filter_inherit" model="ir.ui.view">
			<field name="name">hr.employee.filter.inherit</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_filter" />
			<field name="arch" type="xml">
				<xpath expr="filter[@name='message_needaction']" position="after">
					
					<filter string="Profil non complet" domain="['|','|','|','|','|','|', ('personal_information','=',False),('id_photos','=',False),('certificate_residence','=',False),('marriage_certificate','=',False),
('cin','=',False),('work_certificate','=',False),('qualifications','=',False),('criminal_records','=',False),
('card_cnaps','=',False),('birth_certificate_children','=',False),('ethics_course_certificate','=',False)]" />
					
					<filter string="Profil complet" domain="['&amp;','&amp;','&amp;','&amp;','&amp;','&amp;', ('personal_information','=',True),('id_photos','=',True),('certificate_residence','=',True),('marriage_certificate','=',True),
('cin','=',True),('work_certificate','=',True),('qualifications','=',True),('criminal_records','=',True),
('card_cnaps','=',True),('birth_certificate_children','=',True),('ethics_course_certificate','=',True)]" />
				
				</xpath>
				<xpath expr="//field[@name='department_id']" position="after">
						<filter string="CDD vs CDI" icon="terp-personal+" domain="[]"
							context="{'group_by':'psi_contract_type'}" />
						<filter string="Bailleur/Projet" icon="terp-personal+" domain="[]"
						context="{'group_by':'psi_budget_code_distribution'}" />
				</xpath>
			</field>
		</record>
		

		<!-- MENUS -->
		<menuitem id="hr_menu_contract_type_sanction" action="action_hr_contract_type_sanction"
			parent="hr.menu_hr_root" sequence="4" />
	</data>
</odoo>
